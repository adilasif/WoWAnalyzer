import CombatLogParser from '../CombatLogParser';
import { GuideProps, Section, SubSection } from 'interface/guide';
import { IntroSection } from './guide/IntroSection';
import { SpellLink } from 'interface';
import TALENTS from 'common/TALENTS/deathknight';
import SPELLS from 'common/SPELLS/deathknight';
import PreparationSection from 'interface/guide/components/Preparation/PreparationSection';

export default function Guide({ modules }: GuideProps<typeof CombatLogParser>) {
  return (
    <>
      <IntroSection />

      <Section title="Resource Use">
        <SubSection title="Runes">
          <div>
            <p>
              Runes are Unholy’s core resource used to cast key abilities like{' '}
              <SpellLink spell={TALENTS.FESTERING_STRIKE_TALENT} />. Up to three runes can
              regenerate at a time and managing them efficiently is crucial for maintaining a smooth
              rotation. When you sit on 4 or more Runes, you are overcapping and wasting
              regeneration time. On the other hand, having no Runes available can mean you’re
              starved during important burst windows.
            </p>
          </div>

          <div>
            <p>
              This graph shows your Rune availability throughout the fight. Frequent spikes to 5–6
              may indicate overcapping, while long periods near 0 may suggest resource starvation or
              poor alignment with cooldowns.
            </p>
          </div>

          <div>
            <p>{modules.runeGraph.plot}</p>
          </div>
        </SubSection>

        <SubSection title="Runic Power">
          <div>
            <p>
              Runic Power is your secondary resource, generated by spending Runes with abilities
              like <SpellLink spell={TALENTS.FESTERING_STRIKE_TALENT} />. Your main way to spend it
              is through <SpellLink spell={SPELLS.DEATH_COIL} /> (or{' '}
              <SpellLink spell={SPELLS.EPIDEMIC} /> in AoE situations), which helps maintain
              pressure and fuel your Runic Corruption passive — increasing Rune regeneration speed.
            </p>
          </div>

          <div>
            <p>
              For optimal efficiency, avoid overcapping on Runic Power. You should aim to spend it
              regularly to keep your Rune regeneration flowing. Short spikes are normal, but staying
              near the cap for extended periods usually means missed Death Coils or inefficient GCD
              usage.
            </p>
          </div>

          <div>
            <p>
              This chart displays your Runic Power over time. Watch for flat peaks as signs of waste
              and opportunities to tighten your resource flow.
            </p>
          </div>

          <div>
            <p>{modules.runicPowerGraph.plot}</p>
          </div>
        </SubSection>
      </Section>
      <PreparationSection />
    </>
  );
}
